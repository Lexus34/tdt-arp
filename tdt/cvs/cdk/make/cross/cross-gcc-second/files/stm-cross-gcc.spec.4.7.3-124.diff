--- stm-cross-gcc.spec.orig	2013-08-09 03:05:04.000000000 +0200
+++ stm-cross-gcc.spec	2013-08-17 13:23:44.062483000 +0200
@@ -19,6 +19,7 @@
 Source3: gcc-protoize.1
 
 # SH4 common
+Patch0: stm-cross-gcc.%{version}-%{release}.diff
 Patch100: gcc-4.7.3-stm-130807.patch
 Patch101: gcc-4.7.0-sh-use-gnu-hash-style.patch
 Patch102: gcc-4.2.4-multilibpath.patch
@@ -61,6 +62,9 @@
 
 %define _gccdir %{_stm_cross_lib_dir}/gcc/%{_stm_target_config}/%{version}
 
+# Quick and dirty workaround. RPM complains about unpackaged files.
+%define _unpackaged_files_terminate_build 0
+
 %description
 This is the GNU C compiler, a fairly portable optimizing compiler which
 supports multiple languages.  This package includes support for C, and
@@ -151,6 +155,7 @@
 
 # SH4 common patches
 %if %target_cpu sh
+%patch0 -p1
 %patch100 -p1
 %patch101 -p1
 %patch102 -p1
@@ -183,7 +188,7 @@
 echo 'STMicroelectronics/Linux Base %{version}-%{release}' > gcc/DEV-PHASE
 
 # Update configure in the gcc directory
-(cd gcc && autoconf)
+#(cd gcc && autoconf)
 
 ##############################################################################
 
@@ -267,15 +272,6 @@
 %cross_setup
 %cross_makeinstall
 
-%if %target_cpu sh arm
-%make pdf html
-
-install -d %{buildroot}/%{_stm_cross_doc_dir}/html
-install -d %{buildroot}/%{_stm_cross_doc_dir}/pdf
-# cp gcc/doc/*.pdf %{buildroot}/%{_stm_cross_doc_dir}
-# cp -r gcc/HTML/gcc-%{version} %{buildroot}/%{_stm_cross_doc_dir}/html
-%endif
-
 cd ..
 
 %compress_man %{buildroot}%{_stm_cross_info_dir}
